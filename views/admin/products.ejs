<%- include('../header') %>

<div class="container">
  <div class="row">
    <div class="col s12 center-align">
      <h4 class="blue-text text-darken-3">Product Management</h4>
    </div>
  </div>

  <div class="row">
    <form
      action="/admin/products/bulk-update-price"
      method="POST"
      class="col s12"
    >
      <div class="input-field inline">
        <input
          type="number"
          name="priceChange"
          id="priceChange"
          step="0.01"
          required
        />
        <label for="priceChange">+/- Price By ($)</label>
      </div>
      <button class="btn blue darken-3 waves-effect waves-light" type="submit">
        <i class="material-icons left">update</i>Update All Prices
      </button>
    </form>
  </div>

  <div class="row">
    <div class="col s12 right-align">
      <a
        href="/admin/products/new"
        class="btn waves-effect waves-light blue darken-2"
      >
        <i class="material-icons left">add</i>Add Product
      </a>
    </div>
  </div>

  <div class="row">
    <div class="col s12">
      <table class="striped responsive-table highlight">
        <thead class="blue lighten-5">
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Price ($)</th>
            <th>Stock</th>
            <th class="center-align">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% products.forEach(product => { %>
          <tr>
            <td><%= product.name %></td>
            <td><%= product.description %></td>
            <td><%= product.price %></td>
            <td><%= product.stock %></td>
            <td class="center-align">
              <a
                href="/admin/products/<%= product._id %>/edit"
                class="btn-small amber darken-2 waves-effect"
              >
                <i class="material-icons">edit</i>
              </a>
              <form
                action="/admin/products/<%= product._id %>/delete"
                method="POST"
                style="display: inline"
              >
                <button
                  type="submit"
                  class="btn-small red darken-2 waves-effect"
                >
                  <i class="material-icons">delete</i>
                </button>
              </form>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<%- include('../footer') %>
